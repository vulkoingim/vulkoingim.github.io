<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Obsidian Location - Aleksandar&#39;s Blog</title><link rel="icon" type="image/png" href=icons/myicon.png /><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Obsidian Location" />
<meta property="og:description" content="How to &#34;automatically&#34; get your  accurate location in Obsidian notes" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://vulkoingim.github.io/posts/obsidian-location/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-11-13T14:01:52+00:00" />
<meta property="article:modified_time" content="2024-11-13T14:01:52+00:00" />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Obsidian Location"/>
<meta name="twitter:description" content="How to &#34;automatically&#34; get your  accurate location in Obsidian notes"/>
<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300" rel="stylesheet">

	<link rel="stylesheet" type="text/css" media="screen" href="https://vulkoingim.github.io/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://vulkoingim.github.io/css/main.css" />
	<link rel="stylesheet" type="text/css" href="https://vulkoingim.github.io/css/custom.css" />
	<link rel="stylesheet" type="text/css" href="https://vulkoingim.github.io/css/dark.css" media="(prefers-color-scheme: dark)" />
	<link rel="stylesheet" type="text/css" href="https://vulkoingim.github.io/css/custom-dark.css" media="(prefers-color-scheme: dark)" />

	
	<script src="https://vulkoingim.github.io/js/main.js"></script>
	<script>
		!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
		posthog.init('phc_X14SwB4DKkD5SFmoeKvazuNv1XBDdwZBk5lhauRBmS2',{api_host:'https://eu.i.posthog.com', person_profiles: 'identified_only' 
			})
	</script>
</head>

<body>
	<div class="container wrapper post">
		<div class="header">
	<base href="https://vulkoingim.github.io/">
	<h1 class="site-title"><a href="https://vulkoingim.github.io/">Aleksandar&#39;s Blog</a></h1>
	<div class="site-description"><h2>Random ramblings</h2><nav class="nav social">
			<ul class="flat">
				<a href="https://bsky.app/profile/vulkoingim.bsky.social" title="BlueSky"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Bluesky</title><path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"/></svg></a>
				<a href="https://mastodon.social/@vulkoingim" title="Mastodon"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Mastodon</title><path d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z"/></svg></a>
				<a href="https://github.com/vulkoingim/" title="Mastodon"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">All posts</a>
			</li>
			
			<li>
				<a href="/about/">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post-header">
			<h1 class="title">Obsidian Location</h1>
			<div class="meta">Posted at &mdash; Nov 13, 2024</div>
		</div>

		<div class="markdown">
			<p>Recently I started using Obsidian and journaling daily. It took no time for me to start tracking all kinds of things for each day, and naturally some of those things ended up being my location and the weather.</p>
<p>It turns out that getting your accurate location in Obsidian is a bit of a pain in the ass. Most of the solutions I saw online were based on determining your location <a href="https://forum.obsidian.md/t/mobile-can-obsidian-api-provide-current-geo-location-gps-on-android-ios/21638/8">from your IP address</a> which is, needless to say, wildly inaccurate. Others required you to <a href="https://github.com/esm7/obsidian-map-view#gps-location-support">run a separate (Android) app, or go through a web page</a></p>
<p>Now I wanted something that can requires minimum intervention on my part - I <code>just</code> want things to work without me having to do any manual work.</p>
<p>Some caveats:</p>
<ul>
<li>This is specifically for iOS/OS X</li>
<li>I sync between my mobile and desktop app through iCloud</li>
<li>Not sure if it would work with other sync solutions - haven&rsquo;t tried it.</li>
</ul>
<p>Anyway&hellip;</p>
<p>The gist of it is to create a Shortcut, which will run periodically (or on any other trigger you like) on a device that has location capabilities, and insert the location information directly in your vault, in a note, in <code>FrontMatter</code> format. That&rsquo;s pretty much it.</p>
<p><a href="https://www.icloud.com/shortcuts/1e955b46e1d44126b780368f35277366">Here is a link to the shortcut</a> if you want to directly use it. Just be sure to modify the path, as it will surely be different for your Vault. Just click on <code>Meta</code> which will prompt you to point to a folder on your machine.</p>
<p>Or if you want to recreate it yourself, here&rsquo;s a screenshot of the settings. Not sure if there&rsquo;s a way to grab the raw code behind that shortcut, so far I haven&rsquo;t found a way (but also haven&rsquo;t looked much).</p>
<p><img src="/images/shortcut.png" alt="shortcut"></p>
<p>On my iphone I also have 2 automations that will run this shortcut:</p>
<ul>
<li>Run daily in the morning</li>
<li>Run after I turn airplay mode off
<img src="/images/automation.png" alt="automation"></li>
</ul>
<p>Also I can trigger the shortcut manually whenever I want in order to update my location.</p>
<p>Then, using <code>Templater</code> I can grab that information wherever I want, e.g. in my Daily notes and also get weather information based on my location.</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#719e07">&lt;%-</span>
</span></span><span style="display:flex;"><span><span style="color:#268bd2">async</span> <span style="color:#268bd2">function</span> getPageProperties(pageName) {
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">const</span> dataviewApi <span style="color:#719e07">=</span> app.plugins.plugins.dataview.api;
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">const</span> page <span style="color:#719e07">=</span> <span style="color:#268bd2">await</span> dataviewApi.page(pageName);
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">return</span> page;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#268bd2">const</span> locationPage <span style="color:#719e07">=</span> <span style="color:#268bd2">await</span> getPageProperties(<span style="color:#2aa198">&#34;600 - Other/Meta/location&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#268bd2">const</span> city <span style="color:#719e07">=</span> locationPage.city;
</span></span><span style="display:flex;"><span><span style="color:#268bd2">const</span> country <span style="color:#719e07">=</span> locationPage.country;
</span></span><span style="display:flex;"><span><span style="color:#268bd2">const</span> latitude <span style="color:#719e07">=</span> locationPage.latitude;
</span></span><span style="display:flex;"><span><span style="color:#268bd2">const</span> longitude <span style="color:#719e07">=</span> locationPage.longitude;
</span></span><span style="display:flex;"><span><span style="color:#719e07">-%&gt;</span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">---</span>
</span></span><span style="display:flex;"><span>location<span style="color:#719e07">:</span> <span style="color:#2aa198">&#34;&lt;% latitude %&gt;,&lt;% longitude %&gt;&#34;</span>
</span></span><span style="display:flex;"><span>city<span style="color:#719e07">:</span> <span style="color:#719e07">&lt;%</span> city <span style="color:#719e07">%&gt;</span>, <span style="color:#719e07">&lt;%</span> country <span style="color:#719e07">%&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">---</span>
</span></span></code></pre></div><p>I use my phone as the source of my location, as it&rsquo;s always on and I always have it with me. But you can also automate the Shortcut on a Mac.
You can do it through a <a href="https://medium.com/@richardmoult75/how-to-schedule-macos-shortcuts-96774f6972ac">calendar event</a>, as described in the article. Or if you want you can also run it through <code>cron</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>0 7 * * * shortcuts run &#34;Obsidian Location&#34;
</span></span></code></pre></div><p>Probably there are some other tools out there as well that can help you do that, but I haven&rsquo;t really looked into them. I think either of those options should satisfy most use cases. The only caveat here is that your mac will have to be on for the scheduled event to work.</p>

		</div>

		<div class="post-tags">
			
				
					<nav class="nav tags">
							<ul class="flat">
								
								<li><a href="/tags/ios">ios</a></li>
								
								<li><a href="/tags/obsidian">obsidian</a></li>
								
								<li><a href="/tags/blog">blog </a></li>
								
								<li><a href="/tags/mac">mac</a></li>
								
							</ul>
					</nav>
				
			
		</div>
		<script src="https://giscus.app/client.js"
			data-repo="vulkoingim/vulkoingim.github.io"
			data-repo-id="MDEwOlJlcG9zaXRvcnkxODY4OTYyNjI="
			data-category="[ENTER CATEGORY NAME HERE]"
			data-category-id="[ENTER CATEGORY ID HERE]"
			data-mapping="pathname"
			data-strict="0"
			data-reactions-enabled="1"
			data-emit-metadata="0"
			data-input-position="bottom"
			data-theme="preferred_color_scheme"
			data-lang="en"
			crossorigin="anonymous"
			async>
		</script>
		</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> <a href="https://github.com/vividvilla/ezhil">Ezhil theme</a> | Built with <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>




</body>
</html>
